<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="./assets/css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  <title>Room Editor</title>
</head>
<body>
  <div class="header-brand">
    <a href="https://github.com/Elanoran/mud_area_editor" class="branding">
      <img src="assets/images/brand-logo-small.png" alt="Mud Area Editor" class="logo">
    </a>
  </div>
  <div class="editor-wrapper">
    <div id="sidebar">
      <div id="tool-info" class="ui-element">
        <!-- Top toolbar -->
        <div class="toolbar" style="display: flex; gap: 6px; margin-bottom: 0;flex-direction: initial;">
          <button id="undoBtn" class="ui-element" title="Undo">↺</button>
          <button id="redoBtn" class="ui-element" title="Redo">↻</button>
          <button id="cleanSceneBtn" class="ui-element" title="Clean Scene"><i class="fa-solid fa-broom"></i></button>
          <button id="floorToggleBtn2" style="color: #42425b;text-shadow:none;" class="ui-element" title="(Not available)" disabled><i class="fa-solid fa-minus"></i></button>
          <button id="fitViewBtn" class="ui-element" title="Lock"><i class="fa-solid fa-lock"></i></button>
          <button id="helpBtn" class="ui-element" title="Help" style="cursor: pointer;">
            <i class="fa-solid fa-info" style="pointer-events: none;"></i>
          </button>
        </div>
        <!-- Tabs -->
        <hr style="width: 100%;border: none; border-top: 1px solid #404059; margin: 0;">
        <div class="tab-row">
          <div class="tab-header" style="flex-grow: 1;">
            <button class="tab-button active" data-tab="gridTab">Grid</button>
            <button class="tab-button" data-tab="areaTab">Area</button>
            <button class="tab-button" data-tab="roomTab">Room</button>
          </div>
        </div>
        <!-- InfoContainer -->
        <div id="areaInfoContainer">
          <div id="gridTab" class="tab-content active">
            <!-- gridTab -->
            <div class="toolbar" style="display: flex; gap: 6px; margin-bottom: 0;flex-direction: initial;">
              <button id="floorToggleBtn" class="ui-element" title="Show ground floor"><i class="fa-solid fa-square"></i></button>
              <button id="compassBtn" class="ui-element" title="Show Compass"><i class="fa-solid fa-compass toggle-btn-off"></i></button>
              <button id="extraBtn2" style="color: #42425b;text-shadow:none;" class="ui-element" title="(Not available)" disabled><i class="fa-solid fa-minus"></i></button>
              <button id="extraBtn3" style="color: #42425b;text-shadow:none;" class="ui-element" title="(Not available)" disabled><i class="fa-solid fa-minus"></i></button>
              <button id="extraBtn4" style="color: #42425b;text-shadow:none;" class="ui-element" title="(Not available)" disabled><i class="fa-solid fa-minus"></i></button>
              <button id="dontBtn2" style="color: #42425b;text-shadow:none;" class="ui-element" title="Dont Push"><i class="fa-solid fa-triangle-exclamation"></i></button>
            </div>
            <div class="field-group">
              <div style="display: flex; align-items: center; gap: 10px;margin-top: 5px;">
                <button id="gridToggleBtn" class="ui-element" title="Toggle Grid" style="padding:0 5px; color: #e6ded3;;">
                  <svg height="22" width="22" viewBox="0 0 1920 1920" style="margin-top: 4px;margin-left: -4px;" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
                    <path d="M1740 0c99.24 0 180 80.76 180 180v1560c0 99.24-80.76 180-180 180H180c-99.24 0-180-80.76-180-180V180C0 80.76 80.76 0 180 0h1560ZM894 1800v-774H120v677.25c0 53.213 43.537 96.75 96.75 96.75H894Zm0-906V120H216.75c-53.213 0-96.75 43.537-96.75 96.75V894h774Zm906 809.25V1026h-774v774h677.25c53.213 0 96.75-43.537 96.75-96.75Zm0-809.25V216.75c0-53.213-43.537-96.75-96.75-96.75H1026v774h774Z" fill-rule="evenodd"/>
                  </svg>
                </button>
                <select id="gridSelect" class="full-width"></select>
              </div>
            </div>
            <hr style="border: none; border-top: 1px solid #404059; margin: 10px 0 0;">
            <div class="field-group" style="margin-top: 10px;">
              <label for="surfaceSelect">Ground Surface Material:<br>
                <select id="surfaceSelect" class="full-width">
                  <option value="grass">Champions League</option>
                  <option value="asphalt">Formula One</option>
                  <option value="fabric">Couture Court</option>
                  <option value="blue">Azure Arena</option>
                  <option value="sand">Desert Dunes</option>
                  <option value="dirt">Miners' Cross</option>
                  <option value="charcoal">Charcoal Pit</option>
                </select>
              </label>
            </div>
          </div>
          <!-- areaTab -->
          <div id="areaTab" class="tab-content">
            <div class="toolbar" style="display: flex; gap: 6px; margin-bottom: 0;flex-direction: initial;">
              <button id="floorToggleBtn3" style="color: #42425b;text-shadow:none;" class="ui-element" title="Show ground floor"><i class="fa-solid fa-eye-slash"></i></button>
              <button id="extraBtn1" style="color: #42425b;text-shadow:none;" class="ui-element" title="(Not available)" disabled><i class="fa-solid fa-minus"></i></button>
              <button id="extraBtn2" style="color: #42425b;text-shadow:none;" class="ui-element" title="(Not available)" disabled><i class="fa-solid fa-minus"></i></button>
              <button id="extraBtn3" style="color: #42425b;text-shadow:none;" class="ui-element" title="(Not available)" disabled><i class="fa-solid fa-minus"></i></button>
              <button id="extraBtn4" style="color: #42425b;text-shadow:none;" class="ui-element" title="(Not available)" disabled><i class="fa-solid fa-minus"></i></button>
              <button id="dontBtn" style="color: #42425b;text-shadow:none;" class="ui-element" title="(Not available)" disabled><i class="fa-solid fa-minus"></i></button>
            </div>
            <div class="field-group" style="margin-top: 10px;">
              <label>Area Name:<br>
                <input type="text" id="areaName" class="full-width">
              </label>
            </div>
            <div class="field-group">
              <label>Filename:<br>
                <div style="display: flex; align-items: center;">
                  <input type="text" id="filename" class="full-width" style="flex: 1;">
                  <span id="filenameExt" style="margin-left: 5px; color: #aaa; min-width: 30px;">.json</span>
                </div>
              </label>
            </div>
            <div class="vnum-row">
              <div class="vnum-field">
                <label>VNUM Min:<br>
                  <input type="number" id="vnumMin" class="full-width">
                </label>
              </div>
              <div class="vnum-field">
                <label>VNUM Max:<br>
                  <input type="number" id="vnumMax" class="full-width">
                </label>
              </div>
            </div>
            <hr style="width: 100%;border: none; border-top: 1px solid #404059; margin: 0;">
            <div class="toolbar" style="display: flex; justify-content: space-between; align-items: center; margin-top: 12px;">
              <div style="display: flex; align-items: center; gap: 6px;">
                <button id="importJsonBtn" class="ui-element" title="Import JSON"><i class="fa-solid fa-upload"></i></button>
                <input type="file" id="importInput" accept=".json" style="display:none">
              </div>
              <div style="display: flex; align-items: center; gap: 6px;">
                <button id="exportFormatBtn" class="ui-element" title="Export As"><i class="fa-solid fa-save"></i></button>
                <select id="exportFormat" class="ui-element" style="flex: 1 1 150px; font-size: 1em; height: 2.4em; margin-bottom: 4px;"></select>
              </div>
            </div>
          </div>
          <!-- roomTab -->
          <div id="roomTab" class="tab-content">
            <div class="toolbar" style="display: flex; flex-direction: initial; gap: 6px;">
              <button id="moveRoomUpBtn" class="ui-element" title="Move Room Up"><i class="fa-solid fa-arrow-up"></i></button>
              <button id="moveRoomDownBtn" class="ui-element" title="Move Room down"><i class="fa-solid fa-arrow-down"></i></button>
              <button id="extraBtn3" style="color: #42425b;text-shadow:none;" class="ui-element" title="(Not available)" disabled><i class="fa-solid fa-minus"></i></button>
              <button id="extraBtn4" style="color: #42425b;text-shadow:none;" class="ui-element" title="(Not available)" disabled><i class="fa-solid fa-minus"></i></button>
              <button id="extraBtn5" style="color: #42425b;text-shadow:none;" class="ui-element" title="(Not available)" disabled><i class="fa-solid fa-minus"></i></button>
              <button id="deleteRoomBtn" class="ui-element" title="Delete Room"><i class="fa-solid fa-trash"></i></button>
            </div>
            <div class="field-group">
            <label for="roomColorOptions"></label>
            <div id="roomColorOptions" style="display: flex; gap: 6px; flex-wrap: wrap;">
              <button class="room-color-option" data-color="#e74c3c" style="background:#e74c3c;" title="Red"></button>
              <button class="room-color-option" data-color="#f39c12" style="background:#f39c12;" title="Orange"></button>
              <button class="room-color-option" data-color="#f1c40f" style="background:#f1c40f;" title="Yellow"></button>
              <button class="room-color-option" data-color="#2ecc71" style="background:#2ecc71;" title="Green"></button>
              <button class="room-color-option" data-color="#3498db" style="background:#3498db;" title="Blue"></button>
              <button class="room-color-option" data-color="#9b59b6" style="background:#9b59b6;" title="Purple"></button>
              <button class="room-color-option" data-color="#ffffff" style="background:#ffffff; border:1px solid #aaa;" title="White"></button>
              <button class="room-color-option" data-color="#95a5a6" style="background:#95a5a6;" title="Gray"></button>
            </div>
            <hr style="border: none; border-top: 1px solid #404059; margin: 10px 0 0;">
        </div>
            <div class="field-group">
              <label>
                VNUM:
                <span id="roomVnumCoords" style="margin-left: 10px; font-weight: normal; color: #939393;"></span><br>
                <input type="number" id="roomVnum" class="full-width">
              </label>
            </div>
            <div class="field-group">
              <label>Name:<br>
                <input type="text" id="roomName" class="full-width">
              </label>
            </div>
            <div class="field-group">
              <label>Description:<br>
                <textarea id="roomDesc" class="full-width" rows="4"></textarea>
              </label>
            </div>
            <div class="field-group">
              <label>Exits:</label>
              <ul id="roomExitsList" class="full-width"></ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="levelWheelContainer" class="level-wheel-container">
      <button id="levelWheelUp" class="wheel-arrow">&#9650;</button>
      <div id="levelWheel" class="level-wheel"></div>
      <button id="levelWheelDown" class="wheel-arrow">&#9660;</button>
    </div>
  </div>
  <!-- helpPopup -->
  <div id="helpPopup" class="ui-element">
    <button id="helpClose" style="position:absolute; top:5px; right:8px; font-size:16px; background:none; border:none; color:white; cursor:pointer;">✕</button>
    <h2>Editor Help</h2>
    <p><strong style="font-size: 1.2em;">Welcome to the Room Editor. Here's what you can do:</strong></p>
    <ul>
      <li><strong>Summon a Room: <i>(Key: <kbd>Shift+Mouse Left Click</kbd>)</i></strong> Hover over the grid, channel a bit of Shift + Left-click magic, and behold, a brand new room appears (provided you’re not already entangled with another room’s selection).</li>
      <li><strong>Banishing a Room: <i>(Key: <kbd>Delete</kbd> key)</i></strong> Select the unfortunate room destined for oblivion and click the delete icon. Think of it as politely asking it to depart this plane of existence.</li>
      <li><strong>Linking Realms: <i>(Key: <kbd>Shift+Mouse Left Click</kbd>)</i></strong> Click a room to mark it as your current focus, then Shift + Left click another room to forge or sever a directional passage. It’s like arranging diplomatic treaties between kingdoms, sometimes you break alliances as much as you make them.</li>
      <li><strong>Lock and Tinker:</strong> After conjuring a room, click the lock button to free it from its grid prison; then drag it about like a mischievous imp rearranging furniture in the night.</li>
      <li><strong>Inscribing Lore:</strong> Use the fields on the left to assign a VNUM, bestow a name, and inscribe a description. Treat it as writing the foreword to an epic saga, no pressure.</li>
      <li><strong>Import/Export Rituals:</strong> Summon JSON files or dispatch your creation into the ether via the import/export controls. It’s akin to sending messages by raven, only faster and without the feathers.</li>
      <li><strong>Colouring the Aether:</strong> Choose a hue from the palette beneath the Room section to set the color for newly conjured rooms, or repaint a selected room as though you’re doodling on reality itself.</li>
      <li><strong>Undo/Redo Incantations:</strong> Made a misstep in your master plan? Click undo or redo to bend time and correct, or reintroduce, your previous decisions. Use responsibly; paradoxes may ensue.</li>
      <li><strong>Reveal Hidden Layers: <i>(Key: <kbd>UP or DOWN</kbd> key)</i></strong> Toggle floor visibility to peer into lower levels or hide them away, like peeking under the floorboards for secret passages (or dust bunnies).</li>
      <li><strong>Save Your Masterpiece:</strong> When satisfied, hit save or download to preserve your handiwork for posterity, or for the next unsuspecting adventurer to explore.</li>
    </ul>
  </div>
  <script type="module" src="./assets/js/main.js" defer></script>
</body>
</html>